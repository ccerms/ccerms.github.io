import{c as g,r as p,o as u,a as _,F as b,d as L,t as m,e as $,f as a,g as P,_ as H,b as n,w as d,i as B,j as o,m as I,k as F,l as N,n as M,q,S as z,ap as W,p as E,z as G,v as J,W as K,as as O}from"./index.cf42fdb7.js";import{_ as D}from"./CardBoxModal.293300a9.js";import{_ as j}from"./FormField.fc61414c.js";import{_ as A}from"./FormControl.44c64591.js";import{_ as Q}from"./NotificationBar.92bb6639.js";import{u as R}from"./course.e5eca672.js";const X={key:0,class:"p-3 bg-gray-100/50 dark:bg-gray-800"},Y={key:0},Z=a("th",null,"Code",-1),ee=a("th",null,"Course",-1),te=a("th",null,"Created",-1),se=a("th",null,"Updated",-1),ae=a("th",null,null,-1),le={"data-label":"Code"},oe={"data-label":"Course"},ne={"data-label":"Created",class:"lg:w-1 whitespace-nowrap"},re=["title"],ue={"data-label":"Updated",class:"lg:w-1 whitespace-nowrap"},de=["title"],ce={class:"before:hidden lg:w-1 whitespace-nowrap"},ie={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-gray-800"},_e={__name:"CourseTable",props:{data:{type:Array,default:[]},checkable:Boolean},emits:["select-course","destroy-course"],setup(T,{emit:k}){const t=T,C=g(()=>t.data);p(!1);const f=p(10),c=p(0),r=p([]),w=g(()=>C.value.slice(f.value*c.value,f.value*(c.value+1))),y=g(()=>Math.ceil(C.value.length/f.value)),V=g(()=>c.value+1),x=g(()=>{const e=[];for(let i=0;i<y.value;i++)e.push(i);return e}),S=e=>{k("select-course",e)},U=e=>{k("destroy-course",e)},v=(e,i)=>{const s=[];return e.forEach(h=>{i(h)||s.push(h)}),s},l=(e,i)=>{e?r.value.push(i):r.value=v(r.value,s=>s.id===i.id)};return(e,i)=>(u(),_(b,null,[r.value.length?(u(),_("div",X,[(u(!0),_(b,null,L(r.value,s=>(u(),_("span",{key:s.id,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm bg-gray-100 dark:bg-gray-700"},m(s.name),1))),128))])):$("",!0),a("table",null,[a("thead",null,[a("tr",null,[t.checkable?(u(),_("th",Y)):$("",!0),Z,ee,te,se,ae])]),a("tbody",null,[(u(!0),_(b,null,L(o(w),s=>(u(),_("tr",{key:s.id},[t.checkable?(u(),P(H,{key:0,onChecked:h=>l(h,s)},null,8,["onChecked"])):$("",!0),a("td",le,m(s.code),1),a("td",oe,m(s.course.toUpperCase()),1),a("td",ne,[a("small",{class:"text-gray-500 dark:text-gray-400",title:s.created_at},m(s.created_at),9,re)]),a("td",ue,[a("small",{class:"text-gray-500 dark:text-gray-400",title:s.updated_at},m(s.updated_at),9,de)]),a("td",ce,[n(N,{type:"justify-start lg:justify-end","no-wrap":""},{default:d(()=>[n(B,{color:"info",icon:o(I),small:"",onClick:h=>S(s)},null,8,["icon","onClick"]),n(B,{color:"danger",icon:o(F),small:"",onClick:h=>U(s)},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])]),a("div",ie,[n(M,null,{default:d(()=>[n(N,null,{default:d(()=>[(u(!0),_(b,null,L(o(x),s=>(u(),P(B,{key:s,active:s===c.value,label:s+1,small:"",onClick:h=>c.value=s},null,8,["active","label","onClick"]))),128))]),_:1}),a("small",null,"Page "+m(o(V))+" of "+m(o(y)),1)]),_:1})])],64))}},me=a("b",null,"Confirm",-1),pe=E(" to delete course "),ke={__name:"CourseSettings",setup(T){const k=p(["Admin","Settings","Courses"]),t=R(),C=p(!1),f=p(!1),c=p(!1),r=W("Loader");t.fetch();const w=()=>{C.value=!0,t.id="",t.course=""},y=v=>{f.value=!0,t.select(v)},V=v=>{c.value=!0,t.select(v)},x=()=>{r.show(),t.create().then(()=>{r.hide()}).catch(()=>{r.hide()})},S=()=>{r.show(),t.update().then(()=>{r.hide()}).catch(()=>{r.hide()})},U=()=>{t.status.status=!0};return(v,l)=>(u(),_(b,null,[n(D,{modelValue:C.value,"onUpdate:modelValue":l[1]||(l[1]=e=>C.value=e),"large-title":"Create Course",button:"success",buttonLabel:"Create",onConfirm:l[2]||(l[2]=e=>x())},{default:d(()=>[n(j,{label:"Course Title"},{default:d(()=>[n(A,{modelValue:o(t).course,"onUpdate:modelValue":l[0]||(l[0]=e=>o(t).course=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),n(D,{modelValue:f.value,"onUpdate:modelValue":l[4]||(l[4]=e=>f.value=e),title:"Update Course",buttonLabel:"Update",onConfirm:l[5]||(l[5]=e=>S())},{default:d(()=>[n(j,{label:"Course Title"},{default:d(()=>[n(A,{modelValue:o(t).course,"onUpdate:modelValue":l[3]||(l[3]=e=>o(t).course=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),n(D,{modelValue:c.value,"onUpdate:modelValue":l[6]||(l[6]=e=>c.value=e),"large-title":"Delete Course",button:"danger",buttonLabel:"Confirm",onConfirm:l[7]||(l[7]=e=>o(t).destroy()),"has-cancel":""},{default:d(()=>[a("p",null,[me,pe,a("b",null,m(o(t).course.toUpperCase()),1)])]),_:1},8,["modelValue"]),n(q,{"title-stack":k.value},null,8,["title-stack"]),n(z,null,{default:d(()=>[o(t).status.status?$("",!0):(u(),P(Q,{key:0,isDismissed:o(t).status.status,color:o(t).status.success?"success":"danger",icon:o(G),onHideNotification:U},{default:d(()=>[E(m(o(t).status.message),1)]),_:1},8,["isDismissed","color","icon"])),n(J,{title:"Courses List",hasTable:!0,icon:o(K),headerIcon:o(O),onHeaderIconClick:l[8]||(l[8]=e=>w())},{default:d(()=>[n(_e,{data:o(t).list,onSelectCourse:y,onDestroyCourse:V},null,8,["data"])]),_:1},8,["icon","headerIcon"])]),_:1})],64))}};export{ke as default};
