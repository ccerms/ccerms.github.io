import{A as b,r as h,o as u,k as f,F as y,L as U,t as p,B,b as t,c as D,a6 as j,a as s,w as d,y as P,u as n,a7 as F,a8 as H,x as N,e as M,V as q,l as z,S as G,f as J,a9 as K,aa as O,g as Q}from"./index.02e3cb5b.js";import{_ as T}from"./CardBoxModal.1a333cdf.js";import{_ as E}from"./FormField.7710561b.js";import{_ as I}from"./FormControl.dbc7ef08.js";import{c as V}from"./alert.93440aee.js";import{u as R}from"./course.d11ee161.js";const W={key:0,class:"p-3 bg-gray-100/50 dark:bg-gray-800"},X={key:0},Y=t("th",null,"Code",-1),Z=t("th",null,"Course",-1),ee=t("th",null,"Created",-1),te=t("th",null,"Updated",-1),ae=t("th",null,null,-1),le={"data-label":"Code"},se={"data-label":"Course"},oe={"data-label":"Created",class:"lg:w-1 whitespace-nowrap"},ne=["title"],re={"data-label":"Updated",class:"lg:w-1 whitespace-nowrap"},ue=["title"],de={class:"before:hidden lg:w-1 whitespace-nowrap"},ce={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-gray-800"},ie={__name:"CourseTable",props:{data:{type:Array,default:[]},checkable:Boolean},emits:["select-course","destroy-course"],setup(A,{emit:k}){const l=A,c=b(()=>l.data);h(!1);const g=h(10),i=h(0),_=h([]),$=b(()=>c.value.slice(g.value*i.value,g.value*(i.value+1))),w=b(()=>Math.ceil(c.value.length/g.value)),S=b(()=>i.value+1),L=b(()=>{const r=[];for(let m=0;m<w.value;m++)r.push(m);return r}),x=r=>{k("select-course",r)},v=r=>{k("destroy-course",r)},a=(r,m)=>{const e=[];return r.forEach(C=>{m(C)||e.push(C)}),e},o=(r,m)=>{r?_.value.push(m):_.value=a(_.value,e=>e.id===m.id)};return(r,m)=>(u(),f(y,null,[_.value.length?(u(),f("div",W,[(u(!0),f(y,null,U(_.value,e=>(u(),f("span",{key:e.id,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm bg-gray-100 dark:bg-gray-700"},p(e.name),1))),128))])):B("",!0),t("table",null,[t("thead",null,[t("tr",null,[l.checkable?(u(),f("th",X)):B("",!0),Y,Z,ee,te,ae])]),t("tbody",null,[(u(!0),f(y,null,U(n($),e=>(u(),f("tr",{key:e.id},[l.checkable?(u(),D(j,{key:0,onChecked:C=>o(C,e)},null,8,["onChecked"])):B("",!0),t("td",le,p(e.code),1),t("td",se,p(e.course.toUpperCase()),1),t("td",oe,[t("small",{class:"text-gray-500 dark:text-gray-400",title:e.created_at},p(e.created_at),9,ne)]),t("td",re,[t("small",{class:"text-gray-500 dark:text-gray-400",title:e.updated_at},p(e.updated_at),9,ue)]),t("td",de,[s(N,{type:"justify-start lg:justify-end","no-wrap":""},{default:d(()=>[s(P,{color:"info",icon:n(F),small:"",onClick:C=>x(e)},null,8,["icon","onClick"]),s(P,{color:"danger",icon:n(H),small:"",onClick:C=>v(e)},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])]),t("div",ce,[s(M,null,{default:d(()=>[s(N,null,{default:d(()=>[(u(!0),f(y,null,U(n(L),e=>(u(),D(P,{key:e,active:e===i.value,label:e+1,small:"",onClick:C=>i.value=e},null,8,["active","label","onClick"]))),128))]),_:1}),t("small",null,"Page "+p(n(S))+" of "+p(n(w)),1)]),_:1})])],64))}},_e=t("b",null,"Confirm",-1),me=Q(" to delete course "),be={__name:"CourseSettings",setup(A){const k=h(["Admin","Settings","Courses"]),l=R(),c=q(),g=h(!1),i=h(!1),_=h(!1);l.fetch();const $=()=>{g.value=!0,l.id="",l.course=""},w=v=>{i.value=!0,l.select(v)},S=v=>{_.value=!0,l.select(v)},L=()=>{c.showLoading=!0,l.create().then(()=>{V("success","Successfully created!"),c.showLoading=!1}).catch(()=>{V("warning","Server error!"),c.showLoading=!1})},x=()=>{c.showLoading=!0,l.update().then(()=>{V("success","Successfully updated!"),c.showLoading=!1}).catch(()=>{V("warning","Server error!"),c.showLoading=!1})};return(v,a)=>(u(),f(y,null,[s(T,{modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=o=>g.value=o),"large-title":"Create Course",button:"success",buttonLabel:"Create",onConfirm:a[2]||(a[2]=o=>L())},{default:d(()=>[s(E,{label:"Course Title"},{default:d(()=>[s(I,{modelValue:n(l).course,"onUpdate:modelValue":a[0]||(a[0]=o=>n(l).course=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),s(T,{modelValue:i.value,"onUpdate:modelValue":a[4]||(a[4]=o=>i.value=o),title:"Update Course",buttonLabel:"Update",onConfirm:a[5]||(a[5]=o=>x())},{default:d(()=>[s(E,{label:"Course Title"},{default:d(()=>[s(I,{modelValue:n(l).course,"onUpdate:modelValue":a[3]||(a[3]=o=>n(l).course=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),s(T,{modelValue:_.value,"onUpdate:modelValue":a[6]||(a[6]=o=>_.value=o),"large-title":"Delete Course",button:"danger",buttonLabel:"Confirm",onConfirm:a[7]||(a[7]=o=>n(l).destroy()),"has-cancel":""},{default:d(()=>[t("p",null,[_e,me,t("b",null,p(n(l).course.toUpperCase()),1)])]),_:1},8,["modelValue"]),s(z,{"title-stack":k.value},null,8,["title-stack"]),s(G,null,{default:d(()=>[s(J,{title:"Courses List",hasTable:!0,icon:n(K),headerIcon:n(O),onHeaderIconClick:a[8]||(a[8]=o=>$())},{default:d(()=>[s(ie,{data:n(l).list,onSelectCourse:w,onDestroyCourse:S},null,8,["data"])]),_:1},8,["icon","headerIcon"])]),_:1})],64))}};export{be as default};
