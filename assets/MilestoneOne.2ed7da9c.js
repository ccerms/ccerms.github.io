import{c as g,r as f,o as i,a as p,F as k,d as D,t as d,e as q,f as n,g as O,_ as N,b as s,w as u,i as P,j as a,m as E,k as j,l as L,n as A,q as H,S as I,ap as z,p as W,z as G,v as J,W as K,as as Q}from"./index.cf42fdb7.js";import{_ as S}from"./CardBoxModal.293300a9.js";import{_ as m}from"./FormField.fc61414c.js";import{_ as B}from"./FormFilePicker.e4edc9a1.js";import{_}from"./FormControl.44c64591.js";import{_ as R}from"./NotificationBar.92bb6639.js";import{u as X}from"./milestoneone.539d72ff.js";const Y={key:0,class:"p-3 bg-gray-100/50 dark:bg-gray-800"},Z={key:0},ee=n("th",null,"Code",-1),te=n("th",null,"Milestone",-1),le=n("th",null,"File",-1),ae=n("th",null,"Type",-1),se=n("th",null,"Percent",-1),oe=n("th",null,"Order",-1),ne=n("th",null,"Created",-1),ue=n("th",null,"Updated",-1),re=n("th",null,null,-1),de={"data-label":"Code"},ie={"data-label":"Milestone"},me={"data-label":"File"},ce=["href"],pe={"data-label":"Type"},_e={"data-label":"Percent"},fe={"data-label":"Order"},be={"data-label":"Created",class:"lg:w-1 whitespace-nowrap"},ye=["title"],he={"data-label":"Updated",class:"lg:w-1 whitespace-nowrap"},Ve=["title"],ve={class:"before:hidden lg:w-1 whitespace-nowrap"},ge={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-gray-800"},ke={__name:"Table",props:{data:{type:Array,default:[]},checkable:Boolean},emits:["select-course","destroy-course"],setup(F,{emit:C}){const l=F,h=g(()=>l.data);f(!1);const b=f(10),c=f(0),r=f([]),w=g(()=>h.value.slice(b.value*c.value,b.value*(c.value+1))),v=g(()=>Math.ceil(h.value.length/b.value)),U=g(()=>c.value+1),$=g(()=>{const e=[];for(let t=0;t<v.value;t++)e.push(t);return e}),T=e=>{C("select-course",e)},x=e=>{C("destroy-course",e)},M=(e,t)=>{const o=[];return e.forEach(y=>{t(y)||o.push(y)}),o},V=(e,t)=>{e?r.value.push(t):r.value=M(r.value,o=>o.id===t.id)};return(e,t)=>(i(),p(k,null,[r.value.length?(i(),p("div",Y,[(i(!0),p(k,null,D(r.value,o=>(i(),p("span",{key:o.id,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm bg-gray-100 dark:bg-gray-700"},d(o.name),1))),128))])):q("",!0),n("table",null,[n("thead",null,[n("tr",null,[l.checkable?(i(),p("th",Z)):q("",!0),ee,te,le,ae,se,oe,ne,ue,re])]),n("tbody",null,[(i(!0),p(k,null,D(a(w),o=>(i(),p("tr",{key:o.id},[l.checkable?(i(),O(N,{key:0,onChecked:y=>V(y,o)},null,8,["onChecked"])):q("",!0),n("td",de,d(o.code),1),n("td",ie,d(o.milestone.toUpperCase()),1),n("td",me,[n("a",{href:o.file_url,class:"text-blue-400"},d(o.file),9,ce)]),n("td",pe,d(o.milestone_type==1?"Document Type":"Forms Type"),1),n("td",_e,d(o.percent),1),n("td",fe,d(o.ordernumber),1),n("td",be,[n("small",{class:"text-gray-500 dark:text-gray-400",title:o.created_at},d(o.created_at),9,ye)]),n("td",he,[n("small",{class:"text-gray-500 dark:text-gray-400",title:o.updated_at},d(o.updated_at),9,Ve)]),n("td",ve,[s(L,{type:"justify-start lg:justify-end","no-wrap":""},{default:u(()=>[s(P,{color:"info",icon:a(E),small:"",onClick:y=>T(o)},null,8,["icon","onClick"]),s(P,{color:"danger",icon:a(j),small:"",onClick:y=>x(o)},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])]),n("div",ge,[s(A,null,{default:u(()=>[s(L,null,{default:u(()=>[(i(!0),p(k,null,D(a($),o=>(i(),O(P,{key:o,active:o===c.value,label:o+1,small:"",onClick:y=>c.value=o},null,8,["active","label","onClick"]))),128))]),_:1}),n("small",null,"Page "+d(a(U))+" of "+d(a(v)),1)]),_:1})])],64))}},Me={__name:"MilestoneOne",setup(F){const C=f(["Admin","Settings","Milestone One"]),l=X(),h=f(!1),b=f(!1),c=f(!1),r=z("Loader"),w=()=>{l.status.status=!0};l.fetch();const v=[{id:1,label:"Document Type"},{id:2,label:"Form Type"}],U=()=>{h.value=!0,l.request={id:"",milestone:"",file:[],milestone_type:"",percent:"",ordernumber:""}},$=V=>{b.value=!0,l.select(V)},T=V=>{c.value=!0,l.select(V)},x=()=>{r.show(),l.create().then(()=>{r.hide()}).catch(()=>{r.hide()})},M=()=>{r.show(),l.update().then(()=>{r.hide()}).catch(()=>{r.hide()})};return(V,e)=>(i(),p(k,null,[s(S,{modelValue:h.value,"onUpdate:modelValue":e[5]||(e[5]=t=>h.value=t),"large-title":"Create Milestone",button:"success",buttonLabel:"Create",onConfirm:e[6]||(e[6]=t=>x())},{default:u(()=>[s(m,{label:"Milestone Title"},{default:u(()=>[s(_,{modelValue:a(l).request.milestone,"onUpdate:modelValue":e[0]||(e[0]=t=>a(l).request.milestone=t)},null,8,["modelValue"])]),_:1}),s(m,{label:"Document File"},{default:u(()=>[s(B,{modelValue:a(l).request.file,"onUpdate:modelValue":e[1]||(e[1]=t=>a(l).request.file=t)},null,8,["modelValue"])]),_:1}),s(m,{label:"Type"},{default:u(()=>[s(_,{modelValue:a(l).request.milestone_type,"onUpdate:modelValue":e[2]||(e[2]=t=>a(l).request.milestone_type=t),options:v},null,8,["modelValue"])]),_:1}),s(m,{label:"Percent"},{default:u(()=>[s(_,{modelValue:a(l).request.percent,"onUpdate:modelValue":e[3]||(e[3]=t=>a(l).request.percent=t),type:"number"},null,8,["modelValue"])]),_:1}),s(m,{label:"Order",help:"Enter order number"},{default:u(()=>[s(_,{modelValue:a(l).request.ordernumber,"onUpdate:modelValue":e[4]||(e[4]=t=>a(l).request.ordernumber=t),type:"number"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),s(S,{modelValue:b.value,"onUpdate:modelValue":e[12]||(e[12]=t=>b.value=t),title:"Update Milestone",buttonLabel:"Update",onConfirm:e[13]||(e[13]=t=>M())},{default:u(()=>[s(m,{label:"Milestone Title"},{default:u(()=>[s(_,{modelValue:a(l).request.milestone,"onUpdate:modelValue":e[7]||(e[7]=t=>a(l).request.milestone=t)},null,8,["modelValue"])]),_:1}),s(m,{label:"Document File"},{default:u(()=>[s(B,{modelValue:a(l).request.file,"onUpdate:modelValue":e[8]||(e[8]=t=>a(l).request.file=t)},null,8,["modelValue"])]),_:1}),s(m,{label:"Type"},{default:u(()=>[s(_,{modelValue:a(l).request.milestone_type,"onUpdate:modelValue":e[9]||(e[9]=t=>a(l).request.milestone_type=t),options:v},null,8,["modelValue"])]),_:1}),s(m,{label:"Percent"},{default:u(()=>[s(_,{modelValue:a(l).request.percent,"onUpdate:modelValue":e[10]||(e[10]=t=>a(l).request.percent=t),type:"number"},null,8,["modelValue"])]),_:1}),s(m,{label:"Order",help:"Enter order number"},{default:u(()=>[s(_,{modelValue:a(l).request.ordernumber,"onUpdate:modelValue":e[11]||(e[11]=t=>a(l).request.ordernumber=t),type:"number"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),s(S,{modelValue:c.value,"onUpdate:modelValue":e[14]||(e[14]=t=>c.value=t),"large-title":"Delete Milestone",button:"danger",buttonLabel:"Confirm",onConfirm:e[15]||(e[15]=t=>a(l).destroy()),"has-cancel":""},null,8,["modelValue"]),s(H,{"title-stack":C.value},null,8,["title-stack"]),s(I,null,{default:u(()=>[a(l).status.status?q("",!0):(i(),O(R,{key:0,isDismissed:a(l).status.status,color:a(l).status.success?"success":"danger",icon:a(G),onHideNotification:w},{default:u(()=>[W(d(a(l).status.message),1)]),_:1},8,["isDismissed","color","icon"])),s(J,{title:"Milestone One List",hasTable:!0,icon:a(K),headerIcon:a(Q),onHeaderIconClick:e[16]||(e[16]=t=>U())},{default:u(()=>[s(ke,{data:a(l).list,onSelectCourse:$,onDestroyCourse:T},null,8,["data"])]),_:1},8,["icon","headerIcon"])]),_:1})],64))}};export{Me as default};
