import{ax as G,r as h,ap as J,c as H,o as u,a as i,b as o,w as r,j as l,g as j,p as O,t as m,z as Q,e as D,f as a,v as S,as as L,F as C,d as q,G as B,k as F,Q as K,l as z,i as Y,ar as X,a3 as ee,_ as le,m as te,n as se,q as ae,S as oe,W as ue}from"./index.cf42fdb7.js";import{_ as E}from"./CardBoxModal.293300a9.js";import{_ as W}from"./NotificationBar.92bb6639.js";import{_ as $}from"./FormField.fc61414c.js";import{_ as Z}from"./FormFilePicker.e4edc9a1.js";import{_ as U}from"./FormControl.44c64591.js";import"./milestonetwo.f2cd758a.js";import{u as re}from"./course.e5eca672.js";const ne=a("h4",{class:"text-center"}," Click Delete to remove from list... ",-1),de={class:"space-y-3"},ie={class:"grid grid-cols-2 gap-4"},ce={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},fe={class:"flex justify-center"},me={class:"bg-white rounded-lg w-96 text-gray-900"},pe={class:"flex justify-center"},ve={class:"bg-white rounded-lg w-96 text-gray-900"},be={class:"flex justify-center"},he={class:"bg-white rounded-lg w-96 text-gray-900"},_e={__name:"Create",props:{course:{type:Array,default:[]}},emits:["back","archivesCreate"],setup(R,{emit:x}){const p=R,t=G(),g=h(!1),c=h(""),V=h(""),y=h(""),w=h(!1),k=h(null),I=J("Loader"),M=H(()=>{const d=[];return p.course.forEach(e=>{d.push({id:e.id,label:e.course.toUpperCase()})}),d}),P=()=>{x("back",!1)},T=()=>{I.show(),t.create().then(d=>{I.hide(),x("archivesCreate",{status:!0,list:d.data.researches})}).catch(()=>{I.hide(),x("archivesCreate",{status:!1})})},v=d=>{c.value=d,V.value="Add "+d,g.value=!0,y.value=""},f=()=>{if(y.value==""){alert("Fullname required");return}c.value=="member"?t.request.member.push({id:null,fullname:y.value}):c.value=="adviser"?t.request.adviser.push({id:null,fullname:y.value}):t.request.panel.push({id:null,fullname:y.value})},b=(d,e)=>{k.value=d,c.value=e,w.value=!0},n=()=>{c.value=="member"?t.request.member.splice(k,1):c.value=="adviser"?t.request.adviser.splice(k,1):t.request.panel.splice(k,1)},_=()=>{t.status.status=!0};return(d,e)=>(u(),i(C,null,[o(E,{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=s=>g.value=s),"large-title":V.value,button:"success",buttonLabel:"Add    ",onConfirm:e[2]||(e[2]=s=>f())},{default:r(()=>[o($,{label:"Fullname"},{default:r(()=>[o(U,{modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=s=>y.value=s)},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue","large-title"]),o(E,{modelValue:w.value,"onUpdate:modelValue":e[3]||(e[3]=s=>w.value=s),"large-title":"Delete entry...",button:"warning",buttonLabel:"Delete",onConfirm:e[4]||(e[4]=s=>n())},{default:r(()=>[ne]),_:1},8,["modelValue"]),l(t).status.status?D("",!0):(u(),j(W,{key:0,isDismissed:l(t).status.status,color:l(t).status.success?"success":"danger",icon:l(Q),onHideNotification:_},{default:r(()=>[O(m(l(t).status.message),1)]),_:1},8,["isDismissed","color","icon"])),o(S,{title:"Create Research Archives",form:!0,headerIcon:l(X),onHeaderIconClick:e[15]||(e[15]=s=>P())},{default:r(()=>[a("div",de,[o($,{label:"Research Title"},{default:r(()=>[o(U,{modelValue:l(t).request.title,"onUpdate:modelValue":e[5]||(e[5]=s=>l(t).request.title=s)},null,8,["modelValue"])]),_:1}),o($,{label:"Course"},{default:r(()=>[o(U,{modelValue:l(t).request.course,"onUpdate:modelValue":e[6]||(e[6]=s=>l(t).request.course=s),options:l(M)},null,8,["modelValue","options"])]),_:1}),o($,{label:"Tags",help:"Use (#) to define tags and (,) for separator. eg. #web,#mobile"},{default:r(()=>[o(U,{modelValue:l(t).request.tags,"onUpdate:modelValue":e[7]||(e[7]=s=>l(t).request.tags=s)},null,8,["modelValue"])]),_:1}),a("div",ie,[a("div",null,[o($,{label:"Year Published From"},{default:r(()=>[o(U,{modelValue:l(t).request.year_from_published,"onUpdate:modelValue":e[8]||(e[8]=s=>l(t).request.year_from_published=s),type:"date"},null,8,["modelValue"])]),_:1})]),a("div",null,[o($,{label:"Year Published To"},{default:r(()=>[o(U,{modelValue:l(t).request.year_to_published,"onUpdate:modelValue":e[9]||(e[9]=s=>l(t).request.year_to_published=s),type:"date"},null,8,["modelValue"])]),_:1})])]),o($,{label:"Reseach File"},{default:r(()=>[o(Z,{modelValue:l(t).request.file,"onUpdate:modelValue":e[10]||(e[10]=s=>l(t).request.file=s)},null,8,["modelValue"])]),_:1}),a("div",ce,[a("div",null,[o(S,{title:"Members",headerIcon:l(L),onHeaderIconClick:e[11]||(e[11]=s=>v("member"))},{default:r(()=>[a("div",fe,[a("ul",me,[(u(!0),i(C,null,q(l(t).request.member,(s,A)=>(u(),i("li",{key:s.id,class:"px-6 py-2 border-b border-gray-200 w-full flex justify-between"},[a("p",null,m(s.fullname),1),o(B,{path:l(F),class:"cursor-pointer mr-3",onClick:N=>b(A,"member")},null,8,["path","onClick"])]))),128))])])]),_:1},8,["headerIcon"])]),a("div",null,[o(S,{title:"Adviser(s)",headerIcon:l(L),onHeaderIconClick:e[12]||(e[12]=s=>v("adviser"))},{default:r(()=>[a("div",pe,[a("ul",ve,[(u(!0),i(C,null,q(l(t).request.adviser,(s,A)=>(u(),i("li",{key:s.id,class:"px-6 py-2 border-b border-gray-200 w-full flex justify-between"},[a("p",null,m(s.fullname),1),o(B,{path:l(F),class:"cursor-pointer mr-3",onClick:N=>b(A,"adviser")},null,8,["path","onClick"])]))),128))])])]),_:1},8,["headerIcon"])]),a("div",null,[o(S,{title:"Panel(s)",headerIcon:l(L),onHeaderIconClick:e[13]||(e[13]=s=>v("panel"))},{default:r(()=>[a("div",be,[a("ul",he,[(u(!0),i(C,null,q(l(t).request.panel,(s,A)=>(u(),i("li",{key:s.id,class:"px-6 py-2 border-b border-gray-200 w-full flex justify-between"},[a("p",null,m(s.fullname),1),o(B,{path:l(F),class:"cursor-pointer mr-3",onClick:N=>b(A,"panel")},null,8,["path","onClick"])]))),128))])])]),_:1},8,["headerIcon"])])])]),o(K),o(z,null,{default:r(()=>[o(Y,{label:"Create",color:"info",onClick:e[14]||(e[14]=s=>T())})]),_:1})]),_:1},8,["headerIcon"])],64))}},ge=a("h4",{class:"text-center"}," Click Delete to remove from list... ",-1),ye={class:"space-y-3"},ke={class:"grid grid-cols-2 gap-4"},Ce={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ve={class:"flex justify-center"},$e={class:"bg-white rounded-lg w-96 text-gray-900"},xe={class:"flex justify-center"},we={class:"bg-white rounded-lg w-96 text-gray-900"},qe={class:"flex justify-center"},Ue={class:"bg-white rounded-lg w-96 text-gray-900"},Ie={__name:"Update",props:{course:{type:Array,default:[]},item:{type:Object,default:{}}},emits:["back","archivesUpdate"],setup(R,{emit:x}){const p=R,t=G(),g=h(!1),c=h(""),V=h(""),y=h(""),w=h(!1),k=h(null),I=J("Loader");ee(()=>{t.request=p.item});const M=H(()=>{const d=[];return p.course.forEach(e=>{d.push({id:e.id,label:e.course.toUpperCase()})}),d}),P=()=>{x("back",!1)},T=()=>{I.show(),t.update().then(d=>{I.hide(),x("archivesUpdate",{status:!0,list:d.data.researches})}).catch(()=>{I.hide(),x("archivesUpdate",{status:!1})})},v=d=>{c.value=d,V.value="Add "+d,g.value=!0,y.value=""},f=()=>{if(y.value==""){alert("Fullname required");return}c.value=="member"?t.request.member.push({id:null,fullname:y.value}):c.value=="adviser"?t.request.adviser.push({id:null,fullname:y.value}):t.request.panel.push({id:null,fullname:y.value})},b=(d,e)=>{k.value=d,c.value=e,w.value=!0},n=()=>{if(c.value=="member"){const d=t.request.member[k.value];d.id!==null&&t.destroy_personnel(d.id,"researcharchiveamembers"),t.request.member.splice(k.value,1)}else if(c.value=="adviser"){const d=t.request.adviser[k.value];d.id!==null&&t.destroy_personnel(d.id,"researcharchiveadvisers"),t.request.adviser.splice(k.value,1)}else{const d=t.request.panel[k.value];d.id!==null&&t.destroy_personnel(d.id,"researcharchivepanels"),t.request.panel.splice(k.value,1)}},_=()=>{t.status.status=!0};return(d,e)=>(u(),i(C,null,[o(E,{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=s=>g.value=s),"large-title":V.value,button:"success",buttonLabel:"Add    ",onConfirm:e[2]||(e[2]=s=>f())},{default:r(()=>[o($,{label:"Fullname"},{default:r(()=>[o(U,{modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=s=>y.value=s)},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue","large-title"]),o(E,{modelValue:w.value,"onUpdate:modelValue":e[3]||(e[3]=s=>w.value=s),"large-title":"Delete entry...",button:"warning",buttonLabel:"Delete",onConfirm:e[4]||(e[4]=s=>n())},{default:r(()=>[ge]),_:1},8,["modelValue"]),l(t).status.status?D("",!0):(u(),j(W,{key:0,isDismissed:l(t).status.status,color:l(t).status.success?"success":"danger",icon:l(Q),onHideNotification:_},{default:r(()=>[O(m(l(t).status.message),1)]),_:1},8,["isDismissed","color","icon"])),o(S,{title:"Update Research Archives",form:!0,headerIcon:l(X),onHeaderIconClick:e[15]||(e[15]=s=>P())},{default:r(()=>[a("div",ye,[o($,{label:"Research Title"},{default:r(()=>[o(U,{modelValue:l(t).request.title,"onUpdate:modelValue":e[5]||(e[5]=s=>l(t).request.title=s)},null,8,["modelValue"])]),_:1}),o($,{label:"Course"},{default:r(()=>[o(U,{modelValue:l(t).request.course,"onUpdate:modelValue":e[6]||(e[6]=s=>l(t).request.course=s),options:l(M)},null,8,["modelValue","options"])]),_:1}),o($,{label:"Tags",help:"Use (#) to define tags and (,) for separator. eg. #web,#mobile"},{default:r(()=>[o(U,{modelValue:l(t).request.tags,"onUpdate:modelValue":e[7]||(e[7]=s=>l(t).request.tags=s)},null,8,["modelValue"])]),_:1}),a("div",ke,[a("div",null,[o($,{label:"Year Published From"},{default:r(()=>[o(U,{modelValue:l(t).request.year_from_published,"onUpdate:modelValue":e[8]||(e[8]=s=>l(t).request.year_from_published=s),type:"date"},null,8,["modelValue"])]),_:1})]),a("div",null,[o($,{label:"Year Published To"},{default:r(()=>[o(U,{modelValue:l(t).request.year_to_published,"onUpdate:modelValue":e[9]||(e[9]=s=>l(t).request.year_to_published=s),type:"date"},null,8,["modelValue"])]),_:1})])]),o($,{label:"Reseach File"},{default:r(()=>[o(Z,{modelValue:l(t).request.file,"onUpdate:modelValue":e[10]||(e[10]=s=>l(t).request.file=s)},null,8,["modelValue"])]),_:1}),a("div",Ce,[a("div",null,[o(S,{title:"Members",headerIcon:l(L),onHeaderIconClick:e[11]||(e[11]=s=>v("member"))},{default:r(()=>[a("div",Ve,[a("ul",$e,[(u(!0),i(C,null,q(l(t).request.member,(s,A)=>(u(),i("li",{key:s.id,class:"px-6 py-2 border-b border-gray-200 w-full flex justify-between"},[a("p",null,m(s.fullname),1),o(B,{path:l(F),class:"cursor-pointer mr-3",onClick:N=>b(A,"member")},null,8,["path","onClick"])]))),128))])])]),_:1},8,["headerIcon"])]),a("div",null,[o(S,{title:"Adviser(s)",headerIcon:l(L),onHeaderIconClick:e[12]||(e[12]=s=>v("adviser"))},{default:r(()=>[a("div",xe,[a("ul",we,[(u(!0),i(C,null,q(l(t).request.adviser,(s,A)=>(u(),i("li",{key:s.id,class:"px-6 py-2 border-b border-gray-200 w-full flex justify-between"},[a("p",null,m(s.fullname),1),o(B,{path:l(F),class:"cursor-pointer mr-3",onClick:N=>b(A,"adviser")},null,8,["path","onClick"])]))),128))])])]),_:1},8,["headerIcon"])]),a("div",null,[o(S,{title:"Panel(s)",headerIcon:l(L),onHeaderIconClick:e[13]||(e[13]=s=>v("panel"))},{default:r(()=>[a("div",qe,[a("ul",Ue,[(u(!0),i(C,null,q(l(t).request.panel,(s,A)=>(u(),i("li",{key:s.id,class:"px-6 py-2 border-b border-gray-200 w-full flex justify-between"},[a("p",null,m(s.fullname),1),o(B,{path:l(F),class:"cursor-pointer mr-3",onClick:N=>b(A,"panel")},null,8,["path","onClick"])]))),128))])])]),_:1},8,["headerIcon"])])])]),o(K),o(z,null,{default:r(()=>[o(Y,{label:"Update",color:"info",onClick:e[14]||(e[14]=s=>T())})]),_:1})]),_:1},8,["headerIcon"])],64))}},Ae={key:0,class:"p-3 bg-gray-100/50 dark:bg-gray-800"},De={key:0},Se=a("th",null,"Code",-1),Me=a("th",null,"Research Title",-1),je=a("th",null,"Course",-1),Pe=a("th",null,"Tags",-1),Te=a("th",null,"File",-1),He=a("th",null,"Year Published",-1),Le=a("th",null,"Members",-1),Fe=a("th",null,"Adviser(s)",-1),Re=a("th",null,"Panel(s)",-1),Be=a("th",null,null,-1),Ne={"data-label":"Code"},Ye={"data-label":"Title"},Ee={"data-label":"Course"},ze={"data-label":"Tags"},Ge={"data-label":"File"},Oe=["href"],Qe={"data-label":"Year Published"},We={"data-label":"Member(s)"},Je={"data-label":"Adviser(s)"},Ke={"data-label":"Panel(s)"},Xe={class:"before:hidden lg:w-1 whitespace-nowrap"},Ze={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-gray-800"},el={__name:"Table",props:{data:{type:Array,default:[]},checkable:Boolean},emits:["select-archive","destroy-archive"],setup(R,{emit:x}){const p=R,t=H(()=>p.data);h(!1);const g=h(10),c=h(0),V=h([]),y=H(()=>t.value.slice(g.value*c.value,g.value*(c.value+1))),w=H(()=>Math.ceil(t.value.length/g.value)),k=H(()=>c.value+1),I=H(()=>{const f=[];for(let b=0;b<w.value;b++)f.push(b);return f}),M=f=>{x("select-archive",f)},P=f=>{x("destroy-archive",f)},T=(f,b)=>{const n=[];return f.forEach(_=>{b(_)||n.push(_)}),n},v=(f,b)=>{f?V.value.push(b):V.value=T(V.value,n=>n.id===b.id)};return(f,b)=>(u(),i(C,null,[V.value.length?(u(),i("div",Ae,[(u(!0),i(C,null,q(V.value,n=>(u(),i("span",{key:n.id,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm bg-gray-100 dark:bg-gray-700"},m(n.name),1))),128))])):D("",!0),a("table",null,[a("thead",null,[a("tr",null,[p.checkable?(u(),i("th",De)):D("",!0),Se,Me,je,Pe,Te,He,Le,Fe,Re,Be])]),a("tbody",null,[(u(!0),i(C,null,q(l(y),n=>(u(),i("tr",{key:n.id},[p.checkable?(u(),j(le,{key:0,onChecked:_=>v(_,n)},null,8,["onChecked"])):D("",!0),a("td",Ne,m(n.code),1),a("td",Ye,m(n.title),1),a("td",Ee,m(n.course.course),1),a("td",ze,m(n.tags),1),a("td",Ge,[a("a",{href:n.file_url,class:"text-blue-400"},m(n.file),9,Oe)]),a("td",Qe,m(n.year_from_published)+" - "+m(n.year_to_published),1),a("td",We,[(u(!0),i(C,null,q(n.member,_=>(u(),i("span",{key:_.id,class:"bg-blue-100 text-blue-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-blue-200 dark:text-blue-800"},m(_.fullname.toUpperCase()),1))),128))]),a("td",Je,[(u(!0),i(C,null,q(n.adviser,_=>(u(),i("span",{key:_.id,class:"bg-blue-100 text-blue-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-blue-200 dark:text-blue-800"},m(_.fullname.toUpperCase()),1))),128))]),a("td",Ke,[(u(!0),i(C,null,q(n.panel,_=>(u(),i("span",{key:_.id,class:"bg-blue-100 text-blue-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-blue-200 dark:text-blue-800"},m(_.fullname.toUpperCase()),1))),128))]),a("td",Xe,[o(z,{type:"justify-start lg:justify-end","no-wrap":""},{default:r(()=>[o(Y,{color:"info",icon:l(te),small:"",onClick:_=>M(n)},null,8,["icon","onClick"]),o(Y,{color:"danger",icon:l(F),small:"",onClick:_=>P(n)},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])]),a("div",Ze,[o(se,null,{default:r(()=>[o(z,null,{default:r(()=>[(u(!0),i(C,null,q(l(I),n=>(u(),j(Y,{key:n,active:n===c.value,label:n+1,small:"",onClick:_=>c.value=n},null,8,["active","label","onClick"]))),128))]),_:1}),a("small",null,"Page "+m(l(k))+" of "+m(l(w)),1)]),_:1})])],64))}},dl={__name:"ResearchArchives",setup(R){const x=h(["Admin","Settings","Research Archives"]),p=G(),t=re(),g=h(!1),c=h(!1);h(!1);const V=h(!1),y=()=>{p.status.status=!0};p.fetch(),t.fetch();const w=()=>{g.value=!0,c.value=!1},k=v=>{v.status&&(p.list=v.list,g.value=!1,c.value=!1)},I=v=>{v.status&&(p.list=v.list,g.value=!1,c.value=!1)},M=()=>{g.value=!1,c.value=!1},P=v=>{c.value=!0,g.value=!1,p.select(v)},T=v=>{V.value=!0,p.select(v)};return(v,f)=>(u(),i(C,null,[o(E,{modelValue:V.value,"onUpdate:modelValue":f[0]||(f[0]=b=>V.value=b),"large-title":"Delete Milestone",button:"danger",buttonLabel:"Confirm",onConfirm:f[1]||(f[1]=b=>v.milestoneStore.destroy()),"has-cancel":""},null,8,["modelValue"]),o(ae,{"title-stack":x.value},null,8,["title-stack"]),o(oe,null,{default:r(()=>[l(p).status.status?D("",!0):(u(),j(W,{key:0,isDismissed:l(p).status.status,color:l(p).status.success?"success":"danger",icon:l(Q),onHideNotification:y},{default:r(()=>[O(m(l(p).status.message),1)]),_:1},8,["isDismissed","color","icon"])),g.value?(u(),j(_e,{key:1,course:l(t).list,onBack:M,onArchivesCreate:k},null,8,["course"])):D("",!0),c.value?(u(),j(Ie,{key:2,course:l(t).list,item:l(p).request,onBack:M,onArchivesUpdate:I},null,8,["course","item"])):D("",!0),!g.value&&!c.value?(u(),j(S,{key:3,title:"Research Archives List",hasTable:!0,icon:l(ue),headerIcon:l(L),onHeaderIconClick:f[2]||(f[2]=b=>w())},{default:r(()=>[o(el,{data:l(p).list,onSelectArchive:P,onDestroyArchive:T},null,8,["data"])]),_:1},8,["icon","headerIcon"])):D("",!0)]),_:1})],64))}};export{dl as default};
