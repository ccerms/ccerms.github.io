import{at as Z,au as N,aq as Y,r as f,ap as J,c as j,o as m,a as h,b as s,w as n,f as a,j as t,v as M,as as F,F as U,d as A,t as k,G as R,k as H,Q as K,l as E,i as B,ar as O,e as L,g as P,_ as ee,m as te,n as le,q as se,S as oe,p as ae,z as ne,W as ue}from"./index.cf42fdb7.js";import{_ as G}from"./CardBoxModal.293300a9.js";import{_ as re}from"./NotificationBar.92bb6639.js";import{_ as V}from"./FormField.fc61414c.js";import{_ as $}from"./FormControl.44c64591.js";import{a as X,y as z}from"./settings_data.af95b34a.js";import{u as de}from"./users.2cbc3e24.js";const W=Z("sections",{state:()=>({list:[],request:{id:"",section_code:"",room_number:"",user:"",grouptype:"",from_time:"",to_time:"",from_year:"",to_year:"",student:[],group:[]},status:{status:!0,success:!1,message:""}}),actions:{fetch(){N.get(`${Y}api/sections`).then(c=>{this.list=c.data})},create(){return new Promise((c,g)=>{N.post(`${Y}api/sections`,this.request,{headers:{"Content-Type":"application/json"}}).then(u=>{this.list=u.data.sections,this.status={status:!1,success:u.data.status==200,message:u.data.message},this.clear(),c(u)}).catch(u=>{this.status={status:!1,success:!1,message:"Server error!"},g(u)})})},select(c){this.request={id:c.id,section_code:c.section_code,room_number:c.room_number,user:c.user_id,grouptype:c.grouptype_id,from_time:c.from_time,to_time:c.to_time,from_year:c.from_year,to_year:c.to_year,student:c.sectionstudent,group:c.sectiongroup}},update(){return new Promise((c,g)=>{N.put(`${Y}api/sections/${this.request.id}`,this.request,{headers:{"Content-Type":"application/json"}}).then(u=>{this.list=u.data.sections,this.status={status:!1,success:u.data.status==200,message:u.data.message},this.clear(),c(u)}).catch(u=>{this.status={status:!1,success:!1,message:"Server error!"},g(u)})})},destroy(){console.log(this.id)},destroy_personnel(c,g){N.delete(`${Y}api/${g}/${c}`)},clear(){this.request={id:"",section_code:"",room_number:"",user:"",grouptype:"",from_time:"",to_time:"",from_year:"",to_year:"",student:[],group:[]}}}}),ie=a("h4",{class:"text-center"}," Click Delete to remove from list... ",-1),ce={class:"space-y-3"},me={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},pe=a("hr",null,null,-1),fe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_e={class:"flex justify-center"},ve={class:"bg-white rounded-lg w-96 text-gray-900"},be={class:"flex justify-center"},ye={class:"bg-white rounded-lg w-96 text-gray-900"},he={__name:"Create",props:{teachers:{type:Array,default:[]}},emits:["back","sectionCreate"],setup(c,{emit:g}){const u=c,o=W(),_=f(!1),i=f(""),q=f(""),v=f(""),S=f(!1),C=f(null),w=J("Loader"),x=j(()=>u.teachers.map(d=>({id:d.id,label:d.fullname}))),T=()=>{g("back",!1)},I=()=>{w.show(),o.create().then(d=>{w.hide(),g("sectionCreate",{status:!0,list:d.data.sections})}).catch(()=>{w.hide(),g("sectionCreate",{status:!1})})},b=d=>{i.value=d,q.value="Add "+d,_.value=!0,v.value=""},p=()=>{if(v.value==""){alert("Fullname required");return}i.value=="member"?o.request.member.push({id:null,fullname:v.value}):i.value=="adviser"?o.request.adviser.push({id:null,fullname:v.value}):o.request.panel.push({id:null,fullname:v.value})},y=(d,e)=>{C.value=d,i.value=e,S.value=!0},r=()=>{i.value=="member"?o.request.member.splice(C,1):i.value=="adviser"?o.request.adviser.splice(C,1):o.request.panel.splice(C,1)};return(d,e)=>(m(),h(U,null,[s(G,{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=l=>_.value=l),"large-title":q.value,button:"success",buttonLabel:"Add    ",onConfirm:e[2]||(e[2]=l=>p())},{default:n(()=>[s(V,{label:"Fullname"},{default:n(()=>[s($,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=l=>v.value=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue","large-title"]),s(G,{modelValue:S.value,"onUpdate:modelValue":e[3]||(e[3]=l=>S.value=l),"large-title":"Delete entry...",button:"warning",buttonLabel:"Delete",onConfirm:e[4]||(e[4]=l=>r())},{default:n(()=>[ie]),_:1},8,["modelValue"]),s(M,{title:"Create Section",form:!0,headerIcon:t(O),onHeaderIconClick:e[16]||(e[16]=l=>T())},{default:n(()=>[a("div",ce,[a("div",me,[s(V,{label:"Section Code"},{default:n(()=>[s($,{modelValue:t(o).request.section_code,"onUpdate:modelValue":e[5]||(e[5]=l=>t(o).request.section_code=l)},null,8,["modelValue"])]),_:1}),s(V,{label:"Section Type"},{default:n(()=>[s($,{modelValue:t(o).request.grouptype,"onUpdate:modelValue":e[6]||(e[6]=l=>t(o).request.grouptype=l),options:t(X)},null,8,["modelValue","options"])]),_:1}),s(V,{label:"Room"},{default:n(()=>[s($,{modelValue:t(o).request.room_number,"onUpdate:modelValue":e[7]||(e[7]=l=>t(o).request.room_number=l)},null,8,["modelValue"])]),_:1}),s(V,{label:"Professor"},{default:n(()=>[s($,{modelValue:t(o).request.user,"onUpdate:modelValue":e[8]||(e[8]=l=>t(o).request.user=l),options:t(x)},null,8,["modelValue","options"])]),_:1}),s(V,{label:"From Time"},{default:n(()=>[s($,{modelValue:t(o).request.from_time,"onUpdate:modelValue":e[9]||(e[9]=l=>t(o).request.from_time=l),type:"time"},null,8,["modelValue"])]),_:1}),s(V,{label:"To Time"},{default:n(()=>[s($,{modelValue:t(o).request.to_time,"onUpdate:modelValue":e[10]||(e[10]=l=>t(o).request.to_time=l),type:"time"},null,8,["modelValue"])]),_:1}),s(V,{label:"From Year"},{default:n(()=>[s($,{modelValue:t(o).request.from_year,"onUpdate:modelValue":e[11]||(e[11]=l=>t(o).request.from_year=l),options:t(z)},null,8,["modelValue","options"])]),_:1}),s(V,{label:"To Year"},{default:n(()=>[s($,{modelValue:t(o).request.to_year,"onUpdate:modelValue":e[12]||(e[12]=l=>t(o).request.to_year=l),options:t(z)},null,8,["modelValue","options"])]),_:1})]),pe,a("div",fe,[a("div",null,[s(M,{title:"Students",headerIcon:t(F),onHeaderIconClick:e[13]||(e[13]=l=>b("member"))},{default:n(()=>[a("div",_e,[a("ul",ve,[(m(!0),h(U,null,A(t(o).request.student,(l,D)=>(m(),h("li",{key:l.id,class:"px-6 py-2 border-b border-gray-200 w-full flex justify-between"},[a("p",null,k(`${l.user.lastname}, ${l.user.firstname}`),1),s(R,{path:t(H),class:"cursor-pointer mr-3",onClick:Q=>y(D,"member")},null,8,["path","onClick"])]))),128))])])]),_:1},8,["headerIcon"])]),a("div",null,[s(M,{title:"Groups",headerIcon:t(F),onHeaderIconClick:e[14]||(e[14]=l=>b("adviser"))},{default:n(()=>[a("div",be,[a("ul",ye,[(m(!0),h(U,null,A(t(o).request.adviser,(l,D)=>(m(),h("li",{key:l.id,class:"px-6 py-2 border-b border-gray-200 w-full flex justify-between"},[a("p",null,k(l.fullname),1),s(R,{path:t(H),class:"cursor-pointer mr-3",onClick:Q=>y(D,"adviser")},null,8,["path","onClick"])]))),128))])])]),_:1},8,["headerIcon"])])])]),s(K),s(E,null,{default:n(()=>[s(B,{label:"Create",color:"info",onClick:e[15]||(e[15]=l=>I())})]),_:1})]),_:1},8,["headerIcon"])],64))}},ge=a("h4",{class:"text-center"}," Click Delete to remove from list... ",-1),Ve={class:"space-y-3"},$e={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ke=a("hr",null,null,-1),qe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ce={class:"flex justify-center"},Se={class:"bg-white rounded-lg w-96 text-gray-900"},we={class:"flex justify-center"},Ue={class:"bg-white rounded-lg w-96 text-gray-900"},xe={__name:"Update",props:{teachers:{type:Array,default:[]}},emits:["back","sectionUpdate"],setup(c,{emit:g}){const u=c,o=W(),_=f(!1),i=f(""),q=f(""),v=f(""),S=f(!1),C=f(null),w=J("Loader"),x=j(()=>u.teachers.map(d=>({id:d.id,label:d.fullname}))),T=()=>{g("back",!1)},I=()=>{w.show(),o.update().then(d=>{w.hide(),g("sectionUpdate",{status:!0,list:d.data.sections})}).catch(()=>{w.hide(),g("sectionUpdate",{status:!1})})},b=d=>{i.value=d,q.value="Add "+d,_.value=!0,v.value=""},p=()=>{if(v.value==""){alert("Fullname required");return}i.value=="member"?o.request.member.push({id:null,fullname:v.value}):i.value=="adviser"?o.request.adviser.push({id:null,fullname:v.value}):o.request.panel.push({id:null,fullname:v.value})},y=(d,e)=>{C.value=d,i.value=e,S.value=!0},r=()=>{i.value=="member"?o.request.member.splice(C,1):i.value=="adviser"?o.request.adviser.splice(C,1):o.request.panel.splice(C,1)};return(d,e)=>(m(),h(U,null,[s(G,{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=l=>_.value=l),"large-title":q.value,button:"success",buttonLabel:"Add    ",onConfirm:e[2]||(e[2]=l=>p())},{default:n(()=>[s(V,{label:"Fullname"},{default:n(()=>[s($,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=l=>v.value=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue","large-title"]),s(G,{modelValue:S.value,"onUpdate:modelValue":e[3]||(e[3]=l=>S.value=l),"large-title":"Delete entry...",button:"warning",buttonLabel:"Delete",onConfirm:e[4]||(e[4]=l=>r())},{default:n(()=>[ge]),_:1},8,["modelValue"]),s(M,{title:"Update Section",form:!0,headerIcon:t(O),onHeaderIconClick:e[16]||(e[16]=l=>T())},{default:n(()=>[a("div",Ve,[a("div",$e,[s(V,{label:"Section Code"},{default:n(()=>[s($,{modelValue:t(o).request.section_code,"onUpdate:modelValue":e[5]||(e[5]=l=>t(o).request.section_code=l)},null,8,["modelValue"])]),_:1}),s(V,{label:"Section Type"},{default:n(()=>[s($,{modelValue:t(o).request.grouptype,"onUpdate:modelValue":e[6]||(e[6]=l=>t(o).request.grouptype=l),options:t(X)},null,8,["modelValue","options"])]),_:1}),s(V,{label:"Room"},{default:n(()=>[s($,{modelValue:t(o).request.room_number,"onUpdate:modelValue":e[7]||(e[7]=l=>t(o).request.room_number=l)},null,8,["modelValue"])]),_:1}),s(V,{label:"Professor"},{default:n(()=>[s($,{modelValue:t(o).request.user,"onUpdate:modelValue":e[8]||(e[8]=l=>t(o).request.user=l),options:t(x)},null,8,["modelValue","options"])]),_:1}),s(V,{label:"From Time"},{default:n(()=>[s($,{modelValue:t(o).request.from_time,"onUpdate:modelValue":e[9]||(e[9]=l=>t(o).request.from_time=l),type:"time"},null,8,["modelValue"])]),_:1}),s(V,{label:"To Time"},{default:n(()=>[s($,{modelValue:t(o).request.to_time,"onUpdate:modelValue":e[10]||(e[10]=l=>t(o).request.to_time=l),type:"time"},null,8,["modelValue"])]),_:1}),s(V,{label:"From Year"},{default:n(()=>[s($,{modelValue:t(o).request.from_year,"onUpdate:modelValue":e[11]||(e[11]=l=>t(o).request.from_year=l),options:t(z)},null,8,["modelValue","options"])]),_:1}),s(V,{label:"To Year"},{default:n(()=>[s($,{modelValue:t(o).request.to_year,"onUpdate:modelValue":e[12]||(e[12]=l=>t(o).request.to_year=l),options:t(z)},null,8,["modelValue","options"])]),_:1})]),ke,a("div",qe,[a("div",null,[s(M,{title:"Students",headerIcon:t(F),onHeaderIconClick:e[13]||(e[13]=l=>b("member"))},{default:n(()=>[a("div",Ce,[a("ul",Se,[(m(!0),h(U,null,A(t(o).request.student,(l,D)=>(m(),h("li",{key:l.id,class:"px-6 py-2 border-b border-gray-200 w-full flex justify-between"},[a("p",null,k(`${l.user.lastname}, ${l.user.firstname}`),1),s(R,{path:t(H),class:"cursor-pointer mr-3",onClick:Q=>y(D,"member")},null,8,["path","onClick"])]))),128))])])]),_:1},8,["headerIcon"])]),a("div",null,[s(M,{title:"Groups",headerIcon:t(F),onHeaderIconClick:e[14]||(e[14]=l=>b("adviser"))},{default:n(()=>[a("div",we,[a("ul",Ue,[(m(!0),h(U,null,A(t(o).request.group,(l,D)=>(m(),h("li",{key:l.id,class:"px-6 py-2 border-b border-gray-200 w-full flex justify-between"},[a("p",null,k(l.group.groupname),1),s(R,{path:t(H),class:"cursor-pointer mr-3",onClick:Q=>y(D,"adviser")},null,8,["path","onClick"])]))),128))])])]),_:1},8,["headerIcon"])])])]),s(K),s(E,null,{default:n(()=>[s(B,{label:"Update",color:"info",onClick:e[15]||(e[15]=l=>I())})]),_:1})]),_:1},8,["headerIcon"])],64))}},Te={key:0,class:"p-3 bg-gray-100/50 dark:bg-gray-800"},Ie={key:0},De=a("th",null,"Section Code",-1),je=a("th",null,"Scheduled Time",-1),Le=a("th",null,"Room",-1),Me=a("th",null,"Year",-1),Ae=a("th",null,"Subject Teacher",-1),Pe=a("th",null,"Type",-1),Be=a("th",null,"Student #",-1),Fe=a("th",null,"Group #",-1),He=a("th",null,null,-1),Ge={"data-label":"Section Code"},Ne={"data-label":"Scheduled Time"},Ye={"data-label":"Room"},Re={"data-label":"Year"},Ee={"data-label":"Subject Teacher"},ze={"data-label":"Type"},Qe={"data-label":"Students #"},We={"data-label":"Groups #"},Je={class:"before:hidden lg:w-1 whitespace-nowrap"},Ke={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-gray-800"},Oe={__name:"Table",props:{data:{type:Array,default:[]},checkable:Boolean},emits:["select-section","destroy-section"],setup(c,{emit:g}){const u=c,o=j(()=>u.data);f(!1);const _=f(10),i=f(0),q=f([]),v=j(()=>o.value.slice(_.value*i.value,_.value*(i.value+1))),S=j(()=>Math.ceil(o.value.length/_.value)),C=j(()=>i.value+1),w=j(()=>{const p=[];for(let y=0;y<S.value;y++)p.push(y);return p}),x=p=>{g("select-section",p)},T=p=>{g("destroy-section",p)},I=(p,y)=>{const r=[];return p.forEach(d=>{y(d)||r.push(d)}),r},b=(p,y)=>{p?q.value.push(y):q.value=I(q.value,r=>r.id===y.id)};return(p,y)=>(m(),h(U,null,[q.value.length?(m(),h("div",Te,[(m(!0),h(U,null,A(q.value,r=>(m(),h("span",{key:r.id,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm bg-gray-100 dark:bg-gray-700"},k(r.name),1))),128))])):L("",!0),a("table",null,[a("thead",null,[a("tr",null,[u.checkable?(m(),h("th",Ie)):L("",!0),De,je,Le,Me,Ae,Pe,Be,Fe,He])]),a("tbody",null,[(m(!0),h(U,null,A(t(v),r=>(m(),h("tr",{key:r.id},[u.checkable?(m(),P(ee,{key:0,onChecked:d=>b(d,r)},null,8,["onChecked"])):L("",!0),a("td",Ge,k(r.section_code),1),a("td",Ne,k(`${r.from_time} - ${r.to_time}`),1),a("td",Ye,k(r.room_number),1),a("td",Re,k(`${r.from_year} - ${r.to_year}`),1),a("td",Ee,k(`${r.user.firstname} ${r.user.lastname}`),1),a("td",ze,k(r.grouptype.type),1),a("td",Qe,k(r.sectionstudent.length),1),a("td",We,k(r.sectiongroup.length),1),a("td",Je,[s(E,{type:"justify-start lg:justify-end","no-wrap":""},{default:n(()=>[s(B,{color:"info",icon:t(te),small:"",onClick:d=>x(r)},null,8,["icon","onClick"]),s(B,{color:"danger",icon:t(H),small:"",onClick:d=>T(r)},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])]),a("div",Ke,[s(le,null,{default:n(()=>[s(E,null,{default:n(()=>[(m(!0),h(U,null,A(t(w),r=>(m(),P(B,{key:r,active:r===i.value,label:r+1,small:"",onClick:d=>i.value=r},null,8,["active","label","onClick"]))),128))]),_:1}),a("small",null,"Page "+k(t(C))+" of "+k(t(S)),1)]),_:1})])],64))}},at={__name:"Sections",setup(c){const g=f(["Admin","General","Sections"]),u=W(),o=de(),_=f(!1),i=f(!1);f(!1);const q=f(!1),v=()=>{u.status.status=!0};u.fetch(),o.fetchAvailable();const S=()=>{_.value=!0,i.value=!1,u.clear()},C=b=>{b.status&&(u.list=b.list,_.value=!1,i.value=!1)},w=b=>{b.status&&(u.list=b.list,_.value=!1,i.value=!1)},x=()=>{_.value=!1,i.value=!1},T=b=>{i.value=!0,_.value=!1,u.select(b)},I=b=>{q.value=!0,u.select(b)};return(b,p)=>(m(),h(U,null,[s(G,{modelValue:q.value,"onUpdate:modelValue":p[0]||(p[0]=y=>q.value=y),"large-title":"Delete Milestone",button:"danger",buttonLabel:"Confirm",onConfirm:p[1]||(p[1]=y=>b.milestoneStore.destroy()),"has-cancel":""},null,8,["modelValue"]),s(se,{"title-stack":g.value},null,8,["title-stack"]),s(oe,null,{default:n(()=>[t(u).status.status?L("",!0):(m(),P(re,{key:0,isDismissed:t(u).status.status,color:t(u).status.success?"success":"danger",icon:t(ne),onHideNotification:v},{default:n(()=>[ae(k(t(u).status.message),1)]),_:1},8,["isDismissed","color","icon"])),_.value?(m(),P(he,{key:1,teachers:t(o).subjectteacher_available,onBack:x,onSectionCreate:C},null,8,["teachers"])):L("",!0),i.value?(m(),P(xe,{key:2,teachers:t(o).subjectteacher_available,onBack:x,onSectionUpdate:w},null,8,["teachers"])):L("",!0),!_.value&&!i.value?(m(),P(M,{key:3,title:"Sections List",hasTable:!0,icon:t(ue),headerIcon:t(F),onHeaderIconClick:p[2]||(p[2]=y=>S())},{default:n(()=>[s(Oe,{data:t(u).list,onSelectSection:T,onDestroySection:I},null,8,["data"])]),_:1},8,["icon","headerIcon"])):L("",!0)]),_:1})],64))}};export{at as default};
