import{Q as z,R as B,T,V as E,A as w,o as c,c as q,w as b,b as s,t as o,a as r,v as G,k as u,L as V,D as I,g as v,B as C,F as S,u as h,y as L,x as P,a5 as J,f as N,r as k,a6 as R,ae as H,e as Q,i as K,l as W,S as X,a9 as Y}from"./index.02e3cb5b.js";import{_ as A}from"./FormField.7710561b.js";import{_ as Z}from"./FormFilePicker.e281e131.js";import{_ as F}from"./FormControl.dbc7ef08.js";import{c as M}from"./alert.93440aee.js";import{s as ss}from"./settings_data.619c00ae.js";const O=z("submissionTwo",{state:()=>({list:[],request:{user:"",file:{},status:"",comment:""},status:{status:!0,success:!1,message:""}}),actions:{fetch(t){B.get(`${T}api/twosubmissions/${t}`).then(_=>{this.list=_.data})},comment(t){return new Promise((_,l)=>{let a=new FormData;a.append("user",this.request.user),a.append("file",this.request.file),a.append("status",this.request.status),a.append("comment",this.request.comment),B.post(`${T}api/twosubmissions/comments/${t}`,a,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>{this.list=i.data.comments,this.status={status:!1,success:i.data.status==200,message:i.data.message},this.request.comment="",this.request.file={},_(i)}).catch(i=>{this.status={status:!1,success:!1,message:"Server error!"},l(i)})})},select(t){this.request={id:t.id,title:t.title,course:t.course_id,tags:t.tags,year_from_published:t.year_from_published,year_to_published:t.year_to_published,file:{},adviser:t.adviser,panel:t.panel,member:t.member}},update(){return new Promise((t,_)=>{let l=new FormData;l.append("_method","PUT"),l.append("id",this.request.id),l.append("title",this.request.title),l.append("course",this.request.course),l.append("tags",this.request.tags),l.append("year_from_published",this.request.year_from_published),l.append("year_to_published",this.request.year_to_published),l.append("file",this.request.file),l.append("advisers",JSON.stringify(this.request.adviser)),l.append("panels",JSON.stringify(this.request.panel)),l.append("members",JSON.stringify(this.request.member)),B.post(`${T}api/researcharchives/${this.request.id}`,l,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>{this.list=a.data.researches,this.status={status:!1,success:a.data.status==200,message:a.data.message},this.clear(),t(a)}).catch(a=>{this.status={status:!1,success:!1,message:"Server error!"},_(a)})})},destroy(){console.log(this.id)},destroy_personnel(t,_){B.delete(`${T}api/${_}/${t}`)},clear(){}}}),ts={class:"grid grid-cols-1 lg:grid-cols-6 py-2"},es={class:"content lg:col-start-2 lg:col-span-4"},as={class:"grid grid-cols-1 lg:grid-cols-2 pb-2"},ls={class:"col-span-2"},os=["href"],is={class:"submit-details text-start"},ns={class:"text-lg py-1"},cs=v("Datetime Submitted: "),ds={class:"font-bold"},us={class:"text-lg py-1"},rs=v("Submitted By: "),_s={class:"font-bold"},hs={class:"text-lg py-1"},ms=v("Submitted To: "),ps={class:"font-bold"},bs={class:"checked-details text-end"},fs={class:"text-lg py-1"},gs=v("Datetime Checked : "),ys={class:"font-bold"},vs={class:"text-lg py-1"},ks=v("Checked By : "),xs={class:"font-bold"},$s={class:"text-lg py-1"},ws=v("Status : "),Ss={class:"font-bold"},Cs=s("div",{class:"grid grid-cols-1 lg:grid-col-3"},null,-1),Ds={class:"content lg:col-start-2 lg:col-span-4"},qs={class:"h-80 overflow-y-auto"},Bs={class:"flex justify-between items-center mb-2"},Ts={class:"flex items-center"},Vs={class:"inline-flex items-center mr-3 text-sm text-gray-900 dark:text-white"},As=["src"],Ls={class:"text-sm text-gray-600 dark:text-gray-400"},Ps={class:"text-gray-500 dark:text-gray-400"},Fs={key:0,class:"flex items-center mt-4 space-x-4"},Ms=["href"],Ns={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",class:"mr-1 w-4 h-4",version:"1.1",id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 488.658 488.658",style:{"enable-background":"new 0 0 488.658 488.658"},"xml:space":"preserve"},Os=s("g",null,[s("g",null,[s("path",{d:"M225.485,317.756c-21-23-42.8-45.1-67.4-64.3c-7.4-5.8-16.2-8-22.1-1.1c-5.4,6.3-5,15.3,1.1,22.8    c11,13.4,21.9,27,34.3,39.1c19.9,19.4,41,37.6,61.6,56.4c0.6,1,1.2,1.9,1.8,2.9v0.1c3.1,4.8,9.6,6.2,14.4,3.1l4.8-3.1    c41.9-27.1,72.7-66.8,109.2-100c1.7-1.5,1.7-6.5,0.7-9c-1.9-5-6.8-5.9-12.1-5.1c-17.2,2.7-32.5,11.6-45.7,23    c-15.8,13.7-31.7,27.2-47.2,41.3c1.2-14.4,2.1-28.8,2-43.2c-0.4-32.2-2.4-64.4-3.7-96.6c11.5-57.7,4.9-116.8,7.3-175.2    c0.1-2.6-3.4-6.7-5.8-8c-4.9-2.5-9,0.8-12.1,5.7c-10.3,16.3-14.8,36.1-16,56.2c-2.9,48.5-7.3,97-4,145.7c-0.4,6-0.8,12.1-1.1,18.1    C224.085,256.956,223.585,287.456,225.485,317.756z"}),s("path",{d:"M214.685,450.756c-6.3-0.4-12.6-0.8-18.9-1.1c-40-1.7-80-2.2-119.8,1.9c-11.3,1.2-20.7,5.8-19.9,14.8    c0.8,8.3,8.8,14.4,20.4,15.3c20.9,1.7,41.9,3.6,62.8,3.4c33.7-0.4,67.3-2.4,101-3.7c60.3,11.5,122.1,4.9,183.1,7.3    c2.7,0.1,7-3.4,8.3-5.8c2.7-4.9-0.8-9-6-12.1c-17-10.3-37.7-14.8-58.8-16C316.385,451.956,265.685,447.556,214.685,450.756z"})])],-1),js=[Os],Us=v(" Download File Attached "),zs={class:"mt-2"},Es={class:"py-2"},Gs={__name:"Comments",props:{submissionDetails:{type:Object,default:null}},emits:["back","comment"],setup(t,{emit:_}){const l=t,a=O(),i=E(),m=w(()=>ss.filter(f=>f.id<=3)),p=()=>{_("back",!1)},D=()=>{i.showLoading=!0,a.comment(l.submissionDetails.id).then(f=>{M("success","Successfully checked!"),_("comment",{status:!0,list:f.data.comments}),i.showLoading=!1}).catch(()=>{M("warning","Server error!"),_("comment",{status:!1}),i.showLoading=!1})};return(f,d)=>(c(),q(N,{title:"Submission Details",form:!0,headerIcon:h(J),onHeaderIconClick:d[4]||(d[4]=n=>p())},{default:b(()=>[s("div",ts,[s("div",es,[s("div",as,[s("div",ls,[s("a",{class:"text-xl text-blue-500 hover:underline",href:t.submissionDetails.file_url},o(t.submissionDetails.file),9,os)]),s("div",is,[s("h3",ns,[cs,s("span",ds,o(t.submissionDetails.sendby_datetime),1)]),s("h3",us,[rs,s("span",_s,o(t.submissionDetails.submitted_by),1)]),s("h3",hs,[ms,s("span",ps,o(t.submissionDetails.submitted_to),1)])]),s("div",bs,[s("h3",fs,[gs,s("span",ys,o(t.submissionDetails.approved_datetime),1)]),s("h3",vs,[ks,s("span",xs,o(t.submissionDetails.checked_by),1)]),s("h3",$s,[ws,s("span",Ss,o(t.submissionDetails.status),1)])])]),Cs]),s("div",Ds,[r(G),s("div",qs,[(c(!0),u(S,null,V(t.submissionDetails.comments,n=>{var x;return c(),u("article",{key:n.id,class:I(["p-6 mb-2 text-base bg-white rounded-lg dark:bg-gray-900",n.id!=1?"border-t":""])},[s("footer",Bs,[s("div",Ts,[s("p",Vs,[s("img",{class:"mr-2 w-6 h-6 rounded-full",src:(x=n.user_details.file_url)!=null?x:"https://flowbite.com/docs/images/people/profile-picture-2.jpg",alt:"Michael Gough"},null,8,As),v(" "+o(n.user_details.fullname),1)]),s("p",Ls,o(n.created_at),1)])]),s("p",Ps,o(n.comment),1),n.file_url!=null?(c(),u("div",Fs,[s("a",{href:n.file_url,type:"button",class:"flex items-center text-sm text-gray-500 hover:underline dark:text-gray-400"},[(c(),u("svg",Ns,js)),Us],8,Ms)])):C("",!0)],2)}),128))]),s("div",zs,[s("div",Es,[r(A,{label:"Attached File",class:"pb-2"},{default:b(()=>[r(Z,{modelValue:h(a).request.file,"onUpdate:modelValue":d[0]||(d[0]=n=>h(a).request.file=n)},null,8,["modelValue"])]),_:1}),r(A,{label:"Status",class:"pb-2"},{default:b(()=>[r(F,{modelValue:h(a).request.status,"onUpdate:modelValue":d[1]||(d[1]=n=>h(a).request.status=n),options:h(m)},null,8,["modelValue","options"])]),_:1}),r(A,{label:"Add Comments"},{default:b(()=>[r(F,{type:"textarea",modelValue:h(a).request.comment,"onUpdate:modelValue":d[2]||(d[2]=n=>h(a).request.comment=n)},null,8,["modelValue"])]),_:1})]),r(P,null,{default:b(()=>[r(L,{label:"Post Comment",color:"info",onClick:d[3]||(d[3]=n=>D())})]),_:1})])])])]),_:1},8,["headerIcon"]))}},Is={key:0,class:"p-3 bg-gray-100/50 dark:bg-gray-800"},Js={key:0},Rs=s("th",null,"Revision #",-1),Hs=s("th",null,"Milestone",-1),Qs=s("th",null,"Group",-1),Ks=s("th",null,"File",-1),Ws=s("th",null,"Datetime Submitted",-1),Xs=s("th",null,"Submitted By",-1),Ys=s("th",null,"Submitted To",-1),Zs=s("th",null,"Datetime Checked",-1),st=s("th",null,"Checked By",-1),tt=s("th",null,"Status",-1),et=s("th",null,"Actions",-1),at={"data-label":"Revision #"},lt={"data-label":"Milestone"},ot={"data-label":"Group"},it={"data-label":"File"},nt={"data-label":"Date time Submitted"},ct={"data-label":"Submitted By"},dt={"data-label":"Submitted To"},ut={"data-label":"Date time Checked"},rt={"data-label":"Checked By"},_t={"data-label":"Status"},ht={key:0,class:"p-1 bg-yellow-400 text-white text-sm rounded font-semibold"},mt={key:1,class:"p-1 bg-lime-400 text-white text-sm rounded font-semibold"},pt={key:2,class:"p-1 bg-red-400 text-white text-sm rounded font-semibold"},bt={"data-label":"Actions"},ft={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-gray-800"},gt={__name:"Table",props:{data:{type:Array,default:[]},checkable:Boolean},emits:["select-submission"],setup(t,{emit:_}){const l=t,a=w(()=>l.data);k(!1);const i=k(10),m=k(0),p=k([]),D=w(()=>a.value.slice(i.value*m.value,i.value*(m.value+1))),f=w(()=>Math.ceil(a.value.length/i.value)),d=w(()=>m.value+1),n=w(()=>{const g=[];for(let y=0;y<f.value;y++)g.push(y);return g}),x=g=>{_("select-submission",g)},j=(g,y)=>{const e=[];return g.forEach($=>{y($)||e.push($)}),e},U=(g,y)=>{g?p.value.push(y):p.value=j(p.value,e=>e.id===y.id)};return(g,y)=>(c(),u(S,null,[p.value.length?(c(),u("div",Is,[(c(!0),u(S,null,V(p.value,e=>(c(),u("span",{key:e.id,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm bg-gray-100 dark:bg-gray-700"},o(e.name),1))),128))])):C("",!0),s("table",null,[s("thead",null,[s("tr",null,[l.checkable?(c(),u("th",Js)):C("",!0),Rs,Hs,Qs,Ks,Ws,Xs,Ys,Zs,st,tt,et])]),s("tbody",null,[(c(!0),u(S,null,V(h(D),e=>(c(),u("tr",{key:e.id},[l.checkable?(c(),q(R,{key:0,onChecked:$=>U($,e)},null,8,["onChecked"])):C("",!0),s("td",at,o(e.revision_number),1),s("td",lt,o(e.milestone),1),s("td",ot,o(e.groupname),1),s("td",it,o(e.file),1),s("td",nt,o(e.sendby_datetime),1),s("td",ct,o(e.submitted_by),1),s("td",dt,o(e.submitted_to),1),s("td",ut,o(e.approved_datetime),1),s("td",rt,o(e.checked_by),1),s("td",_t,[e.status_id==1?(c(),u("span",ht,o(e.status),1)):e.status_id==2?(c(),u("span",mt,o(e.status),1)):(c(),u("span",pt,o(e.status),1))]),s("td",bt,[r(P,{type:"justify-start lg:justify-end","no-wrap":""},{default:b(()=>[r(L,{color:"info",icon:h(H),small:"",onClick:$=>x(e)},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])]),s("div",ft,[r(Q,null,{default:b(()=>[r(P,null,{default:b(()=>[(c(!0),u(S,null,V(h(n),e=>(c(),q(L,{key:e,active:e===m.value,label:e+1,small:"",onClick:$=>m.value=e},null,8,["active","label","onClick"]))),128))]),_:1}),s("small",null,"Page "+o(h(d))+" of "+o(h(f)),1)]),_:1})])],64))}},St={__name:"SubmissionTwo",setup(t){const _=k(["Admin","Events","Capstone Two Submissions"]),l=k(null),a=k(!1),i=O(),m=K();i.fetch(m.user.id);const p=()=>{a.value=!a.value},D=d=>{l.value=d,i.request.status=d.status_id,i.request.user=m.user.id,p()},f=d=>{const n=i.list.indexOf(i.list.find(x=>x.id==l.value.id));l.value=i.list[n]};return(d,n)=>(c(),u(S,null,[r(W,{"title-stack":_.value},null,8,["title-stack"]),r(X,null,{default:b(()=>[a.value?(c(),q(Gs,{key:0,submissionDetails:l.value,onBack:p,onComment:f},null,8,["submissionDetails"])):C("",!0),a.value?C("",!0):(c(),q(N,{key:1,title:"Submissions List",hasTable:!0,icon:h(Y)},{default:b(()=>[r(gt,{data:h(i).list,onSelectSubmission:D},null,8,["data"])]),_:1},8,["icon"]))]),_:1})],64))}};export{St as default};
