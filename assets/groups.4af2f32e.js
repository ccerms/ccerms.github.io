import{at as i,au as r,aq as a}from"./index.cf42fdb7.js";const u=i("groups",{state:()=>({list:[],request:{id:"",title:"",groupname:"",course:"",progress_one:"",progress_two:"",onemilestone:"",twomilestone:"",milestone:"",progress:"",status:"",type:"",member:[],adviser:[],panel:[]},status:{status:!0,success:!1,message:""}}),actions:{fetch(){r.get(`${a}api/groups`).then(e=>{this.list=e.data})},create(){return new Promise((e,t)=>{this.request.adviser=JSON.stringify(this.request.adviser),this.request.panel=JSON.stringify(this.request.panel),this.request.member=JSON.stringify(this.request.member),r.post(`${a}api/groups`,this.request,{headers:{"Content-Type":"multipart/form-data"}}).then(s=>{this.list=s.data.groups,this.status={status:!1,success:s.data.status==200,message:s.data.message},s.member_registered=JSON.parse(this.request.member),e(s),this.clear()}).catch(s=>{this.status={status:!1,success:!1,message:"Server error!"},t(s)})})},select(e){this.request={id:e.id,title:e.title,groupname:e.groupname,course:e.course_id,progress_one:e.progress_one,progress_two:e.progress_two,onemilestone:e.onemilestone_id,twomilestone:e.twomilestone_id,milestone:e.type_id>1?e.twomilestone_id:e.onemilestone_id,progress:e.type_id>1?e.progress_two:e.progress_one,status:e.status_id,type:e.type_id,member:this.personnel_data(e.member),adviser:this.personnel_data(e.adviser),panel:this.personnel_data(e.panel)}},update(){return new Promise((e,t)=>{this.request._method="put",this.request.adviser=JSON.stringify(this.request.adviser),this.request.panel=JSON.stringify(this.request.panel),this.request.member=JSON.stringify(this.request.member),r.post(`${a}api/groups/${this.request.id}`,this.request,{headers:{"Content-Type":"multipart/form-data"}}).then(s=>{this.list=s.data.students,this.status={status:!1,success:s.data.status==200,message:s.data.message},s.member_registered=JSON.parse(this.request.member),e(s),this.clear()}).catch(s=>{console.log(s),this.status={status:!1,success:!1,message:"Server error!"},t(s)})})},destroy(){console.log(this.id)},destroy_personnel(e,t){r.delete(`${a}api/${t}/${e}`)},clear(){this.request={id:"",title:"",groupname:"",course:"",progress_one:"",progress_two:"",onemilestone:"",twomilestone:"",status:"",type:"",member:[],adviser:[],panel:[]}},personnel_data(e){var t=[];return e.forEach(s=>{t.push({parent_id:s.id,id:s.user.id,fullname:`${s.user.lastname}, ${s.user.firstname}, ${s.user.middlename}`,available:!1,is_create:!1})}),t}}});export{u};
