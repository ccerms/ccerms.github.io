import{at as l,au as r,aq as i}from"./index.cf42fdb7.js";const p=l("users",{state:()=>({list:[],adviser_available:[],panel_available:[],subjectteacher_available:[],access_list:[],request:{id:"",firstname:"",middlename:"",lastname:"",suffix:"",gender:"",birtdate:"",telephone_number:"",address:"",email:"",password:"",file:{},usertype_id:"",other_type:"",status_id:"",allow_adviser:!1,allow_panel:!1,allow_st:!1,access:[]},status:{status:!0,success:!1,message:""}}),actions:{fetch(){r.get(`${i}api/users`).then(s=>{this.list=s.data})},fetchAvailable(){r.get(`${i}api/users/available`).then(s=>{this.adviser_available=s.data.advisers,this.panel_available=s.data.panels,this.subjectteacher_available=s.data.subjectteachers})},refreshAvailability(){this.adviser_available.forEach(s=>{s.available=!0}),this.panel_available.forEach(s=>{s.available=!0})},fetchAccessList(){this.access_list=[],r.get(`${i}api/useraccess`).then(s=>{s.data.forEach(t=>{const e=this.access_list.find(a=>a.key==t.parent);if(e==null)this.access_list.push({key:t.parent,label:t.label,data:[{id:t.id,access:t.access}]});else{let a=this.access_list.indexOf(e);this.access_list[a].data.push({id:t.id,access:t.access})}})})},create(){return new Promise((s,t)=>{let e=new FormData;e.append("firstname",this.request.firstname),e.append("middlename",this.request.middlename),e.append("lastname",this.request.lastname),e.append("suffix",this.request.suffix),e.append("gender",this.request.gender),e.append("birtdate",this.request.birthdate),e.append("telephone_number",this.request.telephone_number),e.append("address",this.request.address),e.append("email",this.request.email),e.append("password",this.request.password),e.append("file",this.request.file),e.append("usertype",this.request.usertype_id),e.append("other_type",this.request.other_type),e.append("status",this.request.status_id),e.append("access",this.request.access),e.append("allow_adviser",this.request.allow_adviser),e.append("allow_panel",this.request.allow_panel),e.append("allow_st",this.request.allow_st),r.post(`${i}api/users`,e,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>{this.list=a.data.users,this.status={status:!1,success:a.data.status==200,message:a.data.message},this.clear(),s(a)}).catch(a=>{this.status={status:!1,success:!1,message:"Server error!"},t(a)})})},select(s){this.request={id:s.id,firstname:s.firstname,middlename:s.middlename,lastname:s.lastname,suffix:s.suffix,gender:s.gender,birtdate:s.birtdate,telephone_number:s.telephone_number,address:s.address,email:s.email,password:"",usertype_id:s.usertype_id,other_type:s.other_type,status_id:s.status_id,access:s.access.map(t=>t.id),allow_adviser:s.allow_adviser==1,allow_panel:s.allow_panel==1,allow_st:s.allow_st==1}},update(){return new Promise((s,t)=>{let e=new FormData;e.append("_method","PUT"),e.append("id",this.request.id),e.append("firstname",this.request.firstname),e.append("middlename",this.request.middlename),e.append("lastname",this.request.lastname),e.append("suffix",this.request.suffix),e.append("gender",this.request.gender),e.append("birtdate",this.request.birthdate),e.append("telephone_number",this.request.telephone_number),e.append("address",this.request.address),e.append("email",this.request.email),e.append("password",this.request.password),e.append("file",this.request.file),e.append("usertype",this.request.usertype_id),e.append("other_type",this.request.other_type),e.append("status",this.request.status_id),e.append("access",this.request.access),e.append("allow_adviser",this.request.allow_adviser),e.append("allow_panel",this.request.allow_panel),e.append("allow_st",this.request.allow_st),r.post(`${i}api/users/${this.request.id}`,e,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>{this.list=a.data.users,this.status={status:!1,success:a.data.status==200,message:a.data.message},this.clear(),s(a)}).catch(a=>{this.status={status:!1,success:!1,message:"Server error!"},t(a)})})},destroy(){console.log(this.id)},destroy_personnel(s,t){r.delete(`${i}api/${t}/${s}`)},clear(){this.request={id:"",firstname:"",middlename:"",lastname:"",suffix:"",gender:"",birtdate:"",telephone_number:"",address:"",email:"",password:"",file:"",usertype_id:"",other_type:"",status_id:"",access:[],allow_adviser:!1,allow_panel:!1,allow_st:!1}}}});export{p as u};
